(function(){var t=this,n=function(n){"use strict";var e=t.JSON.stringify(n,function(t,n){return"function"==typeof n?n.toString():n},2);return"\n>>> "+t.String(e).replace(/\n/g,"\n    ")},e=function(t){"use strict";return void 0!==t},r=function(t){"use strict";return null===t},o=function(n){"use strict";return t.Array.isArray(n)},i=function(t){"use strict";return"function"==typeof t},a=function(t){"use strict";return"string"==typeof t},u=function(t){"use strict";return"number"==typeof t},c=function(n){"use strict";return!!n&&n.constructor===t.Object},l=function(t){"use strict";return!!(t&&t.tagName&&t.nodeName&&t.ownerDocument&&t.removeAttribute)},s=function(n){"use strict";if(void 0!==n)return t.JSON.parse(t.JSON.stringify(n))},d=function(e,r){"use strict";for(var o=arguments.length,i=t.Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];if(!e)throw new t.Error("@okwolo."+r+i.map(n).join(""))},f=function(){"use strict";var t=[],n=function(){var n=t[0];n&&n()};return{add:function(e){t.push(e),1===t.length&&n()},done:function(){t.shift(),n()}}},h=function(n,e){"use strict";if(t.Array.isArray(n))return n;if(t.Symbol.iterator in t.Object(n))return function(n,e){var r=[],o=!0,i=!1,a=void 0;try{for(var u,c=n[t.Symbol.iterator]();!(o=(u=c.next()).done)&&(r.push(u.value),!e||r.length!==e);o=!0);}catch(t){i=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw a}}return r}(n,e);throw new t.TypeError("Invalid attempt to destructure non-iterable instance")},b=function(){"use strict";var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=null;return{addKey:function(t){return b([{key:t}].concat(n))},addTag:function(t){if(0===n.length)return b([{tag:t}]);var e=n.slice();return e[0].tag=t,b(e)},f:function(){if(!r(e))return e;e="root";for(var t=n.length-1;t>=0;--t){e+=" -> ";var o=n[t],i=o.tag,u=o.key;a(i)?e+=i.replace(/\|\s*[^]*$/g,"| ..."):e+="{{"+u+"}}"}return e},keyList:function(){var e=[];if(n.length<2)return[];for(var r=n.length-2;r>=0;--r)e.push(t.String(n[r].key));return e}}},p=function(){"use strict";for(var n=arguments.length,e=t.Array(n),r=0;r<n;r++)e[r]=arguments[r];return e.map(function(n){return a(n)?n:o(n)?p.apply(void 0,function(n){if(t.Array.isArray(n)){for(var e=0,r=t.Array(n.length);e<n.length;e++)r[e]=n[e];return r}return t.Array.from(n)}(n)):c(n)?p(t.Object.keys(n).map(function(t){return n[t]&&t})):void 0}).filter(t.Boolean).join(" ")},v=function(t,n){for(var e,r=[],o=0,i=0,a="",u=n&&n.delimiter||"/",c=n&&n.delimiters||"./",l=!1;null!==(e=j.exec(t));){var s=e[0],d=e[1],f=e.index;if(a+=t.slice(i,f),i=f+s.length,d)a+=d[1],l=!0;else{var h="",b=t[i],p=e[2],v=e[3],g=e[4],w=e[5];if(!l&&a.length){var O=a.length-1;c.indexOf(a[O])>-1&&(h=a[O],a=a.slice(0,O))}a&&(r.push(a),a="",l=!1);var E=""!==h&&void 0!==b&&b!==h,x="+"===w||"*"===w,D="?"===w||"*"===w,k=h||u,A=v||g;r.push({name:p||o++,prefix:h,delimiter:k,optional:D,repeat:x,partial:E,pattern:A?m(A):"[^"+y(k)+"]+?"})}}return(a||i<t.length)&&r.push(a+t.substr(i)),r},g=function(n){for(var e=new t.Array(n.length),r=0;r<n.length;r++)"object"==typeof n[r]&&(e[r]=new t.RegExp("^(?:"+n[r].pattern+")$"));return function(r,o){for(var i="",a=o&&o.encode||t.encodeURIComponent,u=0;u<n.length;u++){var c=n[u];if("string"!=typeof c){var l,s=r?r[c.name]:void 0;if(t.Array.isArray(s)){if(!c.repeat)throw new t.TypeError('Expected "'+c.name+'" to not repeat, but got array');if(0===s.length){if(c.optional)continue;throw new t.TypeError('Expected "'+c.name+'" to not be empty')}for(var d=0;d<s.length;d++){if(l=a(s[d]),!e[u].test(l))throw new t.TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'"');i+=(0===d?c.prefix:c.delimiter)+l}}else if("string"!=typeof s&&"number"!=typeof s&&"boolean"!=typeof s){if(!c.optional)throw new t.TypeError('Expected "'+c.name+'" to be '+(c.repeat?"an array":"a string"));c.partial&&(i+=c.prefix)}else{if(l=a(t.String(s)),!e[u].test(l))throw new t.TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but got "'+l+'"');i+=c.prefix+l}}else i+=c}return i}},y=function(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")},m=function(t){return t.replace(/([=!:$/()])/g,"\\$1")},w=function(t){return t&&t.sensitive?"":"i"},O=function(n,e,r){for(var o=(r=r||{}).strict,i=!1!==r.end,a=y(r.delimiter||"/"),u=r.delimiters||"./",c=[].concat(r.endsWith||[]).map(y).concat("$").join("|"),l="",s=!1,d=0;d<n.length;d++){var f=n[d];if("string"==typeof f)l+=y(f),s=d===n.length-1&&u.indexOf(f[f.length-1])>-1;else{var h=y(f.prefix),b=f.repeat?"(?:"+f.pattern+")(?:"+h+"(?:"+f.pattern+"))*":f.pattern;e&&e.push(f),f.optional?f.partial?l+=h+"("+b+")?":l+="(?:"+h+"("+b+"))?":l+=h+"("+b+")"}}return i?(o||(l+="(?:"+a+")?"),l+="$"===c?"$":"(?="+c+")"):(o||(l+="(?:"+a+"(?="+c+"))?"),s||(l+="(?="+a+"|"+c+")")),new t.RegExp("^"+l,w(r))},E=function(n,e,r){return n instanceof t.RegExp?function(t,n){if(!n)return t;var e=t.source.match(/\((?!\?)/g);if(e)for(var r=0;r<e.length;r++)n.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return t}(n,e):t.Array.isArray(n)?function(n,e,r){for(var o=[],i=0;i<n.length;i++)o.push(E(n[i],e,r).source);return new t.RegExp("(?:"+o.join("|")+")",w(r))}(n,e,r):(o=e,O(v(n,i=r),o,i));var o,i},x=function(n,r){"use strict";D.browser&&(e(r)||(d(function(){return void 0!==t.window}(),"app : must be run in a browser environment"),r=t.window));var u=function(){},l=function(){return u.apply(void 0,arguments)};return t.Object.assign(l,function(){var n={},r={},u=function(e){for(var r=arguments.length,i=t.Array(r>1?r-1:0),u=1;u<r;u++)i[u-1]=arguments[u];d(a(e),"send : event type is not a string",e);var c=n[e];if(o(c))for(var l=0;l<c.length;++l)c[l].apply(c,i)};return{on:function(t,r){d(a(t),"on : handler type is not a string",t),d(i(r),"on : handler is not a function",r),e(n[t])||(n[t]=[]),n[t].push(r)},send:u,use:function(n){for(var o=arguments.length,i=t.Array(o>1?o-1:0),l=1;l<o;l++)i[l-1]=arguments[l];if(a(n))u.apply(void 0,["blob."+n].concat(i));else{d(c(n),"use : blob is not an object",n);var s=n.name;if(e(s)){if(d(a(s),"utils.bus : blob name is not a string",s),e(r[s]))return;r[s]=!0}for(var f=t.Object.keys(n),h=0;h<f.length;++h){var b=f[h];u("blob."+b,n[b])}}}}}()),l.on("blob.api",function(n,e){d(c(n),"on.blob.api : additional api is not an object",n),t.Object.keys(n).forEach(function(t){e||d(!l[t],'on.blob.api : cannot add key "'+t+'" because it is already defined'),l[t]=n[t]})}),l.on("blob.primary",function(t){d(i(t),"on.blob.primary : primary is not a function",t),u=t}),k.forEach(function(t){t({on:l.on,send:l.send},r)}),e(n)&&l.use("target",n),l},D={kit:"standard",browser:!0},j=/(\\.)|(?:\:(\w+)(?:\(((?:\\.|[^\\()])+)\))?|\(((?:\\.|[^\\()])+)\))([+*?])?/g;E.parse=v,E.compile=function(t,n){return g(v(t,n))},E.tokensToFunction=g,E.tokensToRegExp=O;var k=[function(t){"use strict";var n=t.on,e=t.send,r={},o=r,a=void 0;n("state",function(t){o=t}),n("blob.handler",function(t){d(i(t),"on.blob.handler : handler generator is not a function",t);var n=t(function(){return o});d(i(n),"on.blob.handler : handler from generator is not a function",n),a=n}),e("blob.handler",function(){return function(t){e("state",t)}});e("blob.api",{setState:function(t){var n=i(t)?t(s(o)):t;a(n)},getState:function(){return d(o!==r,"state.getState : cannot get state before it has been set"),s(o)}})},function(n){"use strict";var r=n.on,u=n.send,c=!1,l={},h=[],b=[],p=f(),v=function(){},g=function(t,n,r){var c=[function(){var c,f,h,v,g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;f=y,h=m,v=s(c=g),d(e(l[f]),"state.handler : action type '"+f+"' was not found"),l[f].forEach(function(t){var n=t.target;i(n)&&(n=n(s(c),h),d(o(n),"state.handler : dynamic target of action "+f+" is not an array",n),n.forEach(function(t){d(a(t),"state.handler : dynamic target of action "+f+" is not an array of strings",n)}));var r=s(v);0===n.length&&(v=t.handler(r,h),d(e(v),"state.handler : result of action "+f+" on target @state is undefined"));var u=v;n.forEach(function(o,i){if(d(e(r[o]),"state.handler : target of action "+f+" does not exist: @state."+n.slice(0,i+1).join(".")),i<n.length-1)return r=r[o],void(u=u[o]);var a=t.handler(r[o],h);d(e(a),"state.handler : result of action "+f+" on target @state."+n.join(".")+" is undefined"),u[o]=a})}),u("state",s(v)),b.forEach(function(t){t(s(v),f,h)}),p.done()}];h.reverse().forEach(function(e,o){c[o+1]=function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;t=i,n=a,r=u,e(c[o],s(i),a,u)}}),c[h.length](t,n,r)};r("blob.action",function(){for(var n=arguments.length,e=t.Array(n),r=0;r<n;r++)e[r]=arguments[r];e.reduce(function(t,n){return t.concat(n)},[]).forEach(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.type,e=t.handler,r=t.target;d(a(n),"on.blob.action : action's type is not a string",t,n),d(i(e),"on.blob.action : handler for action "+n+" is not a function",t,e),o(r)?r.forEach(function(e){d(a(e),"on.blob.action : target of action "+n+" is not an array of strings",t,r)}):d(i(r),"on.blob.action : target of action "+n+" is not valid",r),void 0!==l[n]?l[n].push(t):l[n]=[t]})}),r("blob.middleware",function(){for(var n=arguments.length,e=t.Array(n),r=0;r<n;r++)e[r]=arguments[r];e.reduce(function(t,n){return t.concat(n)},[]).forEach(function(t){d(i(t),"on.blob.middleware : middleware is not a function",t),h.push(t)})}),r("blob.watcher",function(){for(var n=arguments.length,e=t.Array(n),r=0;r<n;r++)e[r]=arguments[r];e.reduce(function(t,n){return t.concat(n)},[]).forEach(function(t){d(i(t),"on.blob.watcher : watcher is not a function",t),b.push(t)})}),r("action",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.type,e=t.params,r=void 0===e?{}:e;d(c||"SET_STATE"===n,"state.act : cannot act on state before it has been overrwritten"),c=!0,d(a(n),"state.act : action type is not a string",n),p.add(function(){g(v(),n,r)})}),u("blob.api",{act:function(t,n){return u("action",{type:t,params:n})}}),u("blob.action",{type:"SET_STATE",target:[],handler:function(t,n){return n}}),u("blob.handler",function(t){return v=t,function(t){u("action",{type:"SET_STATE",params:t})}})},function(t){"use strict";t.on;var n=t.send,e={},r=[],o=e,i=[];n("blob.action",{type:"UNDO",target:[],handler:function(){return r.length>0&&r[r.length-1]!==e?(i.push(o),r.pop()):o}}),n("blob.action",{type:"REDO",target:[],handler:function(){return i.length>0?(r.push(o),i.pop()):o}}),n("blob.action",{type:"__RESET__",target:[],handler:function(){return r=[],i=[],o}}),n("blob.watcher",function(t,n){"__RESET__"!==n&&"*"!==n[0]&&("UNDO"!==n&&"REDO"!==n&&(i=[],r.push(o),r.length>21&&r.shift()),o=t)}),n("blob.api",{undo:function(){return n("action",{type:"UNDO"})},redo:function(){return n("action",{type:"REDO"})}})},function(n){"use strict";var r=n.on,o=n.send,a=void 0,u=void 0,c=void 0,l=void 0,s=void 0,f=void 0,h=void 0;r("blob.target",function(t){a=t,o("update",!0)}),r("blob.builder",function(t){d(i(t),"on.blob.builder : builder is not a function",t),u=t,o("update",!1)}),r("blob.draw",function(t){d(i(t),"on.blob.draw : new draw is not a function",t),l=t,o("update",!0)}),r("blob.update",function(t){d(i(t),"on.blob.update : new target updater is not a function",t),s=t,o("update",!1)}),r("blob.build",function(t){d(i(t),"on.blob.build : new build is not a function",t),c=t,o("update",!1)}),r("state",function(t){d(e(t),"on.blob.state : new state is not defined",t),h=t,o("update",!1)});var b=!1,p=!1,v=null;r("update",function(n){if(!p){if(!(e(a)&&e(u)&&e(h)))return void(v||(v=t.setTimeout(function(){var n={builder:u,state:h,target:a};t.Object.keys(n).forEach(function(t){n[t]=n[t]?"ok":"waiting"}),d(p,"view : still waiting to draw after "+t.Math.round(3)+"s",n)},3e3)));p=!0}if(n||!b)return f=l(a,c(u(h))),void(b=!0);f=s(a,c(u(h)),[],f)}),r("sync",function(t,n){d(b,"view.sync : cannot sync component before app has drawn"),f=s(a,n,t,f)}),o("blob.api",{update:function(){return o("update",!1)}}),o("blob.primary",function(t){o("blob.builder",t())})},function(n){"use strict";var l=n.send;l("blob.build",function n(s){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b();if("boolean"==typeof s&&(s=null),r(s))return{text:""};if(u(s)&&(s=t.String(s)),a(s))return{text:s};if(d(o(s),"view.build : vdom object is not a recognized type",f.f(),s),i(s[0])){var v=h(s,3),g=v[0],y=v[1],m=void 0===y?{}:y,w=v[2],O=void 0===w?[]:w;d(c(m),"view.build : component's props is not an object",f.f(),s,m),d(o(O),"view.build : component's children is not an array",f.f(),s,O);var E=void 0;return E=g(t.Object.assign({},m,{children:O}),function(){l("sync",f.keyList(),n(E.apply(void 0,arguments),f))}),n(E(),f)}var x=h(s,3),D=x[0],j=x[1],k=void 0===j?{}:j,A=x[2],M=void 0===A?[]:A;d(a(D),"view.build : tag property is not a string",f.f(),s,D),d(c(k),"view.build : attributes is not an object",f.f(),s,k),d(o(M),"view.build : children of vdom object is not an array",f.f(),s,M);var T=/^ *(\w+) *(?:#([-\w\d]+))? *((?:\.[-\w\d]+)*)? *(?:\|\s*([^\s]{1}[^]*?))? *$/.exec(D);d(o(T),"view.build : tag property cannot be parsed",f.f(),D);var S=h(T,5),N=S[1],$=S[2],R=S[3],_=S[4];e($)&&!e(k.id)&&(k.id=$.trim()),(e(k.className)||e(R))&&(k.className=p(k.className,R).replace(/\./g," ").replace(/  +/g," ").trim()),e(_)&&(e(k.style)?(_=(_+";").replace(/;;$/g,";"),k.style=_+k.style):k.style=_),f=f.addTag(D);for(var C={},U=[],F=0;F<M.length;++F){var I=M[F],J=F,L=n(I,f.addKey(J));L.attributes&&"key"in L.attributes&&(J=L.attributes.key,d(u(J)||a(J),"view.build : invalid element key type",f.f(),J),d(t.String(J).match(/^[\w\d-_]+$/g),"view.build : invalid character in element key",f.f(),J)),J=t.String(J),d(!C[J],"view.build : duplicate child key",f.f(),J),U.push(J),C[J]=L}return{tagName:N,attributes:k,children:C,childOrder:U}})},function(n,r){"use strict";var o=n.send,a=function n(o){if(e(o.text))return o.DOM=r.document.createTextNode(o.text),o;var i=r.document.createElement(o.tagName);t.Object.assign(i,o.attributes);for(var a=0;a<o.childOrder.length;++a){var u=o.childOrder[a],c=n(o.children[u]).DOM;i.appendChild(c)}return o.DOM=i,o},u=function n(r,o,u,c){if(!e(r))return u.children[c]=a(o),void u.DOM.appendChild(u.children[c].DOM);if(!e(o))return u.DOM.removeChild(r.DOM),void delete u.children[c];if(r.tagName!==o.tagName){var l=r.DOM,s=a(o);return u.DOM.replaceChild(s.DOM,l),void t.Object.assign(r,{DOM:void 0,text:void 0,tagName:void 0,attributes:void 0,children:void 0,childOrder:void 0},s)}if(3!==r.DOM.nodeType){for(var d=function(n,e){for(var r=t.Object.keys(t.Object.assign({},n,e)),o=[],a=0;a<r.length;++a){var u=r[a],c=n[u],l=e[u];(i(c)||i(l))&&o.push(u),c!==l&&o.push(u)}return o}(r.attributes,o.attributes),f=0;f<d.length;++f){var h=d[f];r.attributes[h]=o.attributes[h],r.DOM[h]=o.attributes[h]}var b=r.childOrder.slice();r.childOrder=o.childOrder;for(var p=t.Object.keys(t.Object.assign({},r.children,o.children)),v=0;v<p.length;++v){var g=p[v];r.children[g]?o.children[g]||b.splice(b.indexOf(g),1):b.push(g),n(r.children[g],o.children[g],r,g)}if(b.length){for(var y=function(n,e){for(var r=e.length,o=r/2,i=0,a=0,u=0;u<r;++u){for(var c=n.indexOf(e[u]),l=t.Math.min(r-c,r-u),s=1,d=1;d<l&&e[u+d]===n[c+d];++d)s+=1;if(s>i&&(i=s,a=u),i>=o)break}return{start:a,end:a+i-1}}(b,o.childOrder),m=y.start,w=y.end,O=o.childOrder.slice(0,m),E=O.length-1;E>=0;--E){var x=O[E];r.DOM.insertBefore(r.children[x].DOM,r.DOM.firstChild)}for(var D=o.childOrder.slice(w+1,t.Infinity),j=0;j<D.length;++j){var k=D[j];r.DOM.appendChild(r.children[k].DOM)}}}else r.text!==o.text&&(r.DOM.nodeValue=o.text,r.text=o.text)};o("blob.draw",function(t,n){return d(l(t),"view.dom.draw : target is not a DOM node",t),a(n),r.requestAnimationFrame(function(){t.innerHTML="",t.appendChild(n.DOM)}),n}),o("blob.update",function(n,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments[3];d(l(n),"view.dom.update : target is not a DOM node",n);for(var a={DOM:n,children:{root:i},childOrder:["root"]},c="root",s=i,f=0;f<o.length;++f)c=o[f],a=s,s=s.children[c];return r.requestAnimationFrame(function(){try{u(s,e,a,c)}catch(n){t.console.error("view.dom.update : "+n)}}),i})},function(n,e){"use strict";var r=n.on,o=n.send,u=null!==e.document.origin&&"null"!==e.document.origin,l="",s=void 0,h=void 0,b=void 0,p=!1,v=f(),g=function(){for(var n=arguments.length,e=t.Array(n),r=0;r<n;r++)e[r]=arguments[r];d(i(b),"router : fetch is not a function",b),b.apply(void 0,[s].concat(e))},y=function(n){var e=l.replace(/([^\w])/g,"\\$1");return n.replace(new t.RegExp("^"+e),"")||""},m=e.location.pathname;u||(m=""),e.onpopstate=function(){v.add(function(){m=y(e.location.pathname),g(m),v.done()})},r("blob.route",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.path,e=t.handler;d(a(n),"on.blob.route : path is not a string",n),d(i(e),"on.blob.route : handler is not a function",n,e),d(i(h),"on.blob.route : register is not a function",h),v.add(function(){s=h(s,n,e),p||(p=!!g(m)),v.done()})}),r("blob.base",function(t){d(a(t),"on.blob.base : base url is not a string",t),v.add(function(){l=t,m=y(m),g(m),v.done()})}),r("blob.register",function(t){d(i(t),"on.blob.register : register is not a function",h),v.add(function(){h=t,v.done()})}),r("blob.fetch",function(t){d(i(t),"on.blob.fetch : fetch is not a function",b),v.add(function(){b=t,v.done()})}),r("redirect",function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(a(n),"on.redirect : path is not a string",n),d(c(r),"on.redirect : params is not an object",r),v.add(function(){m=n,u?e.history.pushState({},"",(l+m).replace(/^\/C\:/,"")):t.console.log("@okwolo : path changed to\n>>> "+m),g(m,r),v.done()})}),r("show",function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(a(t),"on.show : path is not a string",t),d(c(n),"on.show : params is not an object",n),v.add(function(){g(t,n),v.done()})}),o("blob.api",{redirect:function(t,n){return o("redirect",t,n)},show:function(t,n){return o("show",t,n)}})},function(t){"use strict";(0,t.send)("blob.register",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1],e=arguments[2],r=[],o=void 0;return o="**"===n?/.*/g:E(n,r,{strict:!0}),t.push({pattern:o,keys:r,handler:e}),t})},function(t){"use strict";(0,t.send)("blob.fetch",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=!1;return t.find(function(t){var o=t.pattern.exec(n);if(null!==o)return r=!0,o.shift(),t.keys.forEach(function(t,n){e[t.name]=o[n]}),t.handler(e),r}),r})},function(t){"use strict";t.on;var n=t.send;n("blob.primary",function(t,e){i(t)?n("blob.builder",t()):n("blob.route",{path:t,handler:function(t){n("blob.builder",e(t))}})})}];x.kit="standard",x.version="3.0.1",x.standard=x,t.okwolo=x}).call(this);