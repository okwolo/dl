!function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=1)}([function(t,n,e){"use strict";var r=function(t){var n=JSON.stringify(t,function(t,n){return"function"==typeof n?n.toString():n},2);return"\n>>> "+String(n).replace(/\n/g,"\n    ")};t.exports.isDefined=function(t){return void 0!==t},t.exports.isNull=function(t){return null===t},t.exports.isArray=function(t){return Array.isArray(t)},t.exports.isFunction=function(t){return"function"==typeof t},t.exports.isString=function(t){return"string"==typeof t},t.exports.isNumber=function(t){return"number"==typeof t},t.exports.isBoolean=function(t){return"boolean"==typeof t},t.exports.isObject=function(t){return!!t&&t.constructor===Object},t.exports.isNode=function(t){return!!(t&&t.tagName&&t.nodeName&&t.ownerDocument&&t.removeAttribute)},t.exports.isRegExp=function(t){return t instanceof RegExp},t.exports.isBrowser=function(){return"undefined"!=typeof window},t.exports.deepCopy=function(t){if(void 0!==t)return JSON.parse(JSON.stringify(t))},t.exports.assert=function(t,n){for(var e=arguments.length,o=Array(e>2?e-2:0),i=2;i<e;i++)o[i-2]=arguments[i];if(!t)throw new Error("@okwolo."+n+o.map(r).join(""))},t.exports.makeQueue=function(){var t=[],n=function(){var n=t[0];n&&n()};return{add:function(e){t.push(e),1===t.length&&n()},done:function(){t.shift(),n()}}}},function(t,n,e){"use strict";var r=e(2);t.exports=r({modules:[e(3),e(4),e(5),e(6),e(7),e(8),e(9),e(10),e(12),e(13)],options:{kit:"standard",browser:!0}})},function(t,n,e){"use strict";var r=e(0),o=r.assert,i=r.isArray,a=r.isBrowser,u=r.isDefined,c=r.isFunction,s=r.isObject,l=r.isString;t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.modules,e=void 0===n?[]:n,r=t.options,f=void 0===r?{}:r;o(i(e),"core : passed modules must be an array"),o(s(f),"core : passed options must be an object");var d=function(t,n){f.browser&&(u(n)||(o(a(),"app : must be run in a browser environment"),n=window));var r,d,p,b=function(){},h=function(){return b.apply(void 0,arguments)};return Object.assign(h,(r={},d={},{on:function(t,n){o(l(t),"on : handler type is not a string",t),o(c(n),"on : handler is not a function",n),u(r[t])||(r[t]=[]),r[t].push(n)},send:p=function(t){for(var n=arguments.length,e=Array(n>1?n-1:0),a=1;a<n;a++)e[a-1]=arguments[a];o(l(t),"send : event type is not a string",t);var u=r[t];if(i(u))for(var c=0;c<u.length;++c)u[c].apply(u,e)},use:function(t){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];if(l(t))p.apply(void 0,["blob."+t].concat(e));else{o(s(t),"use : blob is not an object",t);var i=t.name;if(u(i)){if(o(l(i),"utils.bus : blob name is not a string",i),u(d[i]))return;d[i]=!0}for(var a=Object.keys(t),c=0;c<a.length;++c){var f=a[c];p("blob."+f,t[f])}}}})),h.on("blob.api",function(t,n){o(s(t),"on.blob.api : additional api is not an object",t),Object.keys(t).forEach(function(e){n||o(!h[e],'on.blob.api : cannot add key "'+e+'" because it is already defined'),h[e]=t[e]})}),h.on("blob.primary",function(t){o(c(t),"on.blob.primary : primary is not a function",t),b=t}),e.forEach(function(t){t({on:h.on,send:h.send},n)}),u(t)&&h.use("target",t),h};return a()&&(d.kit=f.kit,d.version="3.0.0",u(window.okwolo)||(window.okwolo=d),window.okwolo[f.kit]=d),d}},function(t,n,e){"use strict";var r=e(0),o=r.assert,i=r.deepCopy,a=r.isFunction;t.exports=function(t){var n=t.on,e=t.send,r={},u=r,c=void 0;n("state",function(t){u=t}),n("blob.handler",function(t){o(a(t),"on.blob.handler : handler generator is not a function",t);var n=t(function(){return u});o(a(n),"on.blob.handler : handler from generator is not a function",n),c=n}),e("blob.handler",function(){return function(t){e("state",t)}});e("blob.api",{setState:function(t){var n=a(t)?t(i(u)):t;c(n)},getState:function(){return o(u!==r,"state.getState : cannot get state before it has been set"),i(u)}})}},function(t,n,e){"use strict";var r=e(0),o=r.assert,i=r.deepCopy,a=r.isArray,u=r.isDefined,c=r.isFunction,s=r.isString,l=r.makeQueue;t.exports=function(t){var n=t.on,e=t.send,r=!1,f={},d=[],p=[],b=l(),h=function(){},v=function(t,n,r){var l=[function(){var l,d,h,v,g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;d=y,h=m,v=i(l=g),o(u(f[d]),"state.handler : action type '"+d+"' was not found"),f[d].forEach(function(t){var n=t.target;c(n)&&(n=n(i(l),h),o(a(n),"state.handler : dynamic target of action "+d+" is not an array",n),n.forEach(function(t){o(s(t),"state.handler : dynamic target of action "+d+" is not an array of strings",n)}));var e=i(v);0===n.length&&(v=t.handler(e,h),o(u(v),"state.handler : result of action "+d+" on target @state is undefined"));var r=v;n.forEach(function(i,a){if(o(u(e[i]),"state.handler : target of action "+d+" does not exist: @state."+n.slice(0,a+1).join(".")),a<n.length-1)return e=e[i],void(r=r[i]);var c=t.handler(e[i],h);o(u(c),"state.handler : result of action "+d+" on target @state."+n.join(".")+" is undefined"),r[i]=c})}),e("state",i(v)),p.forEach(function(t){t(i(v),d,h)}),b.done()}];d.reverse().forEach(function(e,o){l[o+1]=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;t=a,n=u,r=c,e(l[o],i(a),u,c)}}),l[d.length](t,n,r)};n("blob.action",function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];n.reduce(function(t,n){return t.concat(n)},[]).forEach(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.type,e=t.handler,r=t.target;o(s(n),"on.blob.action : action's type is not a string",t,n),o(c(e),"on.blob.action : handler for action "+n+" is not a function",t,e),a(r)?r.forEach(function(e){o(s(e),"on.blob.action : target of action "+n+" is not an array of strings",t,r)}):o(c(r),"on.blob.action : target of action "+n+" is not valid",r),void 0!==f[n]?f[n].push(t):f[n]=[t]})}),n("blob.middleware",function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];n.reduce(function(t,n){return t.concat(n)},[]).forEach(function(t){o(c(t),"on.blob.middleware : middleware is not a function",t),d.push(t)})}),n("blob.watcher",function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];n.reduce(function(t,n){return t.concat(n)},[]).forEach(function(t){o(c(t),"on.blob.watcher : watcher is not a function",t),p.push(t)})}),n("action",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.type,e=t.params,i=void 0===e?{}:e;o(r||"SET_STATE"===n,"state.act : cannot act on state before it has been overrwritten"),r=!0,o(s(n),"state.act : action type is not a string",n),b.add(function(){v(h(),n,i)})}),e("blob.api",{act:function(t,n){return e("action",{type:t,params:n})}}),e("blob.action",{type:"SET_STATE",target:[],handler:function(t,n){return n}}),e("blob.handler",function(t){return h=t,function(t){e("action",{type:"SET_STATE",params:t})}})}},function(t,n,e){"use strict";t.exports=function(t){t.on;var n=t.send,e={},r=[],o=e,i=[];n("blob.action",{type:"UNDO",target:[],handler:function(){return r.length>0&&r[r.length-1]!==e?(i.push(o),r.pop()):o}}),n("blob.action",{type:"REDO",target:[],handler:function(){return i.length>0?(r.push(o),i.pop()):o}}),n("blob.action",{type:"__RESET__",target:[],handler:function(){return r=[],i=[],o}}),n("blob.watcher",function(t,n){"__RESET__"!==n&&"*"!==n[0]&&("UNDO"!==n&&"REDO"!==n&&(i=[],r.push(o),r.length>21&&r.shift()),o=t)}),n("blob.api",{undo:function(){return n("action",{type:"UNDO"})},redo:function(){return n("action",{type:"REDO"})}})}},function(t,n,e){"use strict";var r=e(0),o=r.assert,i=r.isDefined,a=r.isFunction;t.exports=function(t){var n=t.on,e=t.send,r=void 0,u=void 0,c=void 0,s=void 0,l=void 0,f=void 0,d=void 0;n("blob.target",function(t){r=t,e("update",!0)}),n("blob.builder",function(t){o(a(t),"on.blob.builder : builder is not a function",t),u=t,e("update",!1)}),n("blob.draw",function(t){o(a(t),"on.blob.draw : new draw is not a function",t),s=t,e("update",!0)}),n("blob.update",function(t){o(a(t),"on.blob.update : new target updater is not a function",t),l=t,e("update",!1)}),n("blob.build",function(t){o(a(t),"on.blob.build : new build is not a function",t),c=t,e("update",!1)}),n("state",function(t){o(i(t),"on.blob.state : new state is not defined",t),d=t,e("update",!1)});var p=!1,b=!1,h=null;n("update",function(t){if(!b){if(!(i(r)&&i(u)&&i(d)))return void(h||(h=setTimeout(function(){var t={builder:u,state:d,target:r};Object.keys(t).forEach(function(n){t[n]=t[n]?"ok":"waiting"}),o(b,"view : still waiting to draw after "+Math.round(3)+"s",t)},3e3)));b=!0}if(t||!p)return f=s(r,c(u(d))),void(p=!0);f=l(r,c(u(d)),[],f)}),n("sync",function(t,n){o(p,"view.sync : cannot sync component before app has drawn"),f=l(r,n,t,f)}),e("blob.api",{update:function(){return e("update",!1)}}),e("blob.primary",function(t){e("blob.builder",t())})}},function(t,n,e){"use strict";var r=function(){return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var e=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(e.push(a.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return e}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var o=e(0),i=o.assert,a=o.isArray,u=o.isBoolean,c=o.isDefined,s=o.isFunction,l=o.isNull,f=o.isNumber,d=o.isObject,p=o.isString,b=function t(){for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];return e.map(function(n){return p(n)?n:a(n)?t.apply(void 0,function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}(n)):d(n)?t(Object.keys(n).map(function(t){return n[t]&&t})):void 0}).filter(Boolean).join(" ")};t.exports=function(t){var n=t.send;n("blob.build",function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=null;return{addKey:function(e){return t([{key:e}].concat(n))},addTag:function(e){if(0===n.length)return t([{tag:e}]);var r=n.slice();return r[0].tag=e,t(r)},f:function(){if(!l(e))return e;e="root";for(var t=n.length-1;t>=0;--t){e+=" -> ";var r=n[t],o=r.tag,i=r.key;p(o)?e+=o.replace(/\|\s*[^]*$/g,"| ..."):e+="{{"+i+"}}"}return e},keyList:function(){var t=[];if(n.length<2)return[];for(var e=n.length-2;e>=0;--e)t.push(String(n[e].key));return t}}}();if(u(e)&&(e=null),l(e))return{text:""};if(f(e)&&(e=String(e)),p(e))return{text:e};if(i(a(e),"view.build : vdom object is not a recognized type",o.f(),e),s(e[0])){var h=r(e,3),v=h[0],g=h[1],y=void 0===g?{}:g,m=h[2],w=void 0===m?[]:m;i(d(y),"view.build : component's props is not an object",o.f(),e,y),i(a(w),"view.build : component's children is not an array",o.f(),e,w);var x=void 0;return x=v(Object.assign({},y,{children:w}),function(){n("sync",o.keyList(),t(x.apply(void 0,arguments),o))}),t(x(),o)}var O=r(e,3),E=O[0],j=O[1],D=void 0===j?{}:j,k=O[2],A=void 0===k?[]:k;i(p(E),"view.build : tag property is not a string",o.f(),e,E),i(d(D),"view.build : attributes is not an object",o.f(),e,D),i(a(A),"view.build : children of vdom object is not an array",o.f(),e,A);var S=/^ *(\w+) *(?:#([-\w\d]+))? *((?:\.[-\w\d]+)*)? *(?:\|\s*([^\s]{1}[^]*?))? *$/.exec(E);i(a(S),"view.build : tag property cannot be parsed",o.f(),E);var M=r(S,5),T=M[1],N=M[2],R=M[3],_=M[4];c(N)&&!c(D.id)&&(D.id=N.trim()),(c(D.className)||c(R))&&(D.className=b(D.className,R).replace(/\./g," ").replace(/  +/g," ").trim()),c(_)&&(c(D.style)?(_=(_+";").replace(/;;$/g,";"),D.style=_+D.style):D.style=_),o=o.addTag(E);for(var $={},C=[],F=0;F<A.length;++F){var B=A[F],U=F,J=t(B,o.addKey(U));J.attributes&&"key"in J.attributes&&(U=J.attributes.key,i(f(U)||p(U),"view.build : invalid element key type",o.f(),U),i(String(U).match(/^[\w\d-_]+$/g),"view.build : invalid character in element key",o.f(),U)),U=String(U),i(!$[U],"view.build : duplicate child key",o.f(),U),C.push(U),$[U]=J}return{tagName:T,attributes:D,children:$,childOrder:C}})}},function(t,n,e){"use strict";var r=e(0),o=r.assert,i=r.isDefined,a=r.isFunction,u=r.isNode;t.exports=function(t,n){var e=t.send,r=function t(e){if(i(e.text))return e.DOM=n.document.createTextNode(e.text),e;var r=n.document.createElement(e.tagName);Object.assign(r,e.attributes);for(var o=0;o<e.childOrder.length;++o){var a=e.childOrder[o],u=t(e.children[a]).DOM;r.appendChild(u)}return e.DOM=r,e},c=function t(n,e,o,u){if(!i(n))return o.children[u]=r(e),void o.DOM.appendChild(o.children[u].DOM);if(!i(e))return o.DOM.removeChild(n.DOM),void delete o.children[u];if(n.tagName!==e.tagName){var c=n.DOM,s=r(e);return o.DOM.replaceChild(s.DOM,c),void Object.assign(n,{DOM:void 0,text:void 0,tagName:void 0,attributes:void 0,children:void 0,childOrder:void 0},s)}if(3!==n.DOM.nodeType){for(var l=function(t,n){for(var e=Object.keys(Object.assign({},t,n)),r=[],o=0;o<e.length;++o){var i=e[o],u=t[i],c=n[i];(a(u)||a(c))&&r.push(i),u!==c&&r.push(i)}return r}(n.attributes,e.attributes),f=0;f<l.length;++f){var d=l[f];n.attributes[d]=e.attributes[d],n.DOM[d]=e.attributes[d]}var p=n.childOrder.slice();n.childOrder=e.childOrder;for(var b=Object.keys(Object.assign({},n.children,e.children)),h=0;h<b.length;++h){var v=b[h];n.children[v]?e.children[v]||p.splice(p.indexOf(v),1):p.push(v),t(n.children[v],e.children[v],n,v)}if(p.length){for(var g=function(t,n){for(var e=n.length,r=e/2,o=0,i=0,a=0;a<e;++a){for(var u=t.indexOf(n[a]),c=Math.min(e-u,e-a),s=1,l=1;l<c&&n[a+l]===t[u+l];++l)s+=1;if(s>o&&(o=s,i=a),o>=r)break}return{start:i,end:i+o-1}}(p,e.childOrder),y=g.start,m=g.end,w=e.childOrder.slice(0,y),x=w.length-1;x>=0;--x){var O=w[x];n.DOM.insertBefore(n.children[O].DOM,n.DOM.firstChild)}for(var E=e.childOrder.slice(m+1,1/0),j=0;j<E.length;++j){var D=E[j];n.DOM.appendChild(n.children[D].DOM)}}}else n.text!==e.text&&(n.DOM.nodeValue=e.text,n.text=e.text)};e("blob.draw",function(t,e){return o(u(t),"view.dom.draw : target is not a DOM node",t),r(e),n.requestAnimationFrame(function(){t.innerHTML="",t.appendChild(e.DOM)}),e}),e("blob.update",function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments[3];o(u(t),"view.dom.update : target is not a DOM node",t);for(var a={DOM:t,children:{root:i},childOrder:["root"]},s="root",l=i,f=0;f<r.length;++f)s=r[f],a=l,l=l.children[s];return n.requestAnimationFrame(function(){try{c(l,e,a,s)}catch(t){console.error("view.dom.update : "+t)}}),i})}},function(t,n,e){"use strict";var r=e(0),o=r.assert,i=r.isFunction,a=r.isObject,u=r.isString,c=r.makeQueue;t.exports=function(t,n){var e=t.on,r=t.send,s=null!==n.document.origin&&"null"!==n.document.origin,l="",f=void 0,d=void 0,p=void 0,b=!1,h=c(),v=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];o(i(p),"router : fetch is not a function",p),p.apply(void 0,[f].concat(n))},g=function(t){var n=l.replace(/([^\w])/g,"\\$1");return t.replace(new RegExp("^"+n),"")||""},y=n.location.pathname;s||(y=""),n.onpopstate=function(){y=g(n.location.pathname),v(y)},e("blob.route",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.path,e=t.handler;o(u(n),"on.blob.route : path is not a string",n),o(i(e),"on.blob.route : handler is not a function",n,e),o(i(d),"on.blob.route : register is not a function",d),f=d(f,n,e),b||(b=!!v(y))}),e("blob.base",function(t){o(u(t),"on.blob.base : base url is not a string",t),l=t,y=g(y),v(y)}),e("blob.register",function(t){o(i(t),"on.blob.register : register is not a function",d),d=t}),e("blob.fetch",function(t){o(i(t),"on.blob.fetch : fetch is not a function",p),p=t}),e("redirect",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(u(t),"on.redirect : path is not a string",t),o(a(e),"on.redirect : params is not an object",e),h.add(function(){y=t,s?n.history.pushState({},"",(l+y).replace(/^\/C\:/,"")):console.log("@okwolo : path changed to\n>>> "+y),v(y,e),h.done()})}),e("show",function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(u(t),"on.show : path is not a string",t),o(a(n),"on.show : params is not an object",n),h.add(function(){v(t,n),h.done()})}),r("blob.api",{redirect:function(t,n){return r("redirect",t,n)},show:function(t,n){return r("show",t,n)}})}},function(t,n,e){"use strict";var r=e(11);t.exports=function(t){(0,t.send)("blob.register",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1],e=arguments[2],o=[],i=void 0;return i="**"===n?/.*/g:r(n,o,{strict:!0}),t.push({pattern:i,keys:o,handler:e}),t})}},function(t,n){t.exports=l,t.exports.parse=i,t.exports.compile=function(t,n){return a(i(t,n))},t.exports.tokensToFunction=a,t.exports.tokensToRegExp=s;var e="/",r="./",o=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function i(t,n){for(var i,a,c=[],s=0,l=0,f="",d=n&&n.delimiter||e,p=n&&n.delimiters||r,b=!1;null!==(i=o.exec(t));){var h=i[0],v=i[1],g=i.index;if(f+=t.slice(l,g),l=g+h.length,v)f+=v[1],b=!0;else{var y="",m=t[l],w=i[2],x=i[3],O=i[4],E=i[5];if(!b&&f.length){var j=f.length-1;p.indexOf(f[j])>-1&&(y=f[j],f=f.slice(0,j))}f&&(c.push(f),f="",b=!1);var D=""!==y&&void 0!==m&&m!==y,k="+"===E||"*"===E,A="?"===E||"*"===E,S=y||d,M=x||O;c.push({name:w||s++,prefix:y,delimiter:S,optional:A,repeat:k,partial:D,pattern:M?(a=M,a.replace(/([=!:$/()])/g,"\\$1")):"[^"+u(S)+"]+?"})}}return(f||l<t.length)&&c.push(f+t.substr(l)),c}function a(t){for(var n=new Array(t.length),e=0;e<t.length;e++)"object"==typeof t[e]&&(n[e]=new RegExp("^(?:"+t[e].pattern+")$"));return function(e,r){for(var o="",i=r&&r.encode||encodeURIComponent,a=0;a<t.length;a++){var u=t[a];if("string"!=typeof u){var c,s=e?e[u.name]:void 0;if(Array.isArray(s)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but got array');if(0===s.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var l=0;l<s.length;l++){if(c=i(s[l]),!n[a].test(c))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'"');o+=(0===l?u.prefix:u.delimiter)+c}}else if("string"!=typeof s&&"number"!=typeof s&&"boolean"!=typeof s){if(!u.optional)throw new TypeError('Expected "'+u.name+'" to be '+(u.repeat?"an array":"a string"));u.partial&&(o+=u.prefix)}else{if(c=i(String(s)),!n[a].test(c))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but got "'+c+'"');o+=u.prefix+c}}else o+=u}return o}}function u(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function c(t){return t&&t.sensitive?"":"i"}function s(t,n,o){for(var i=(o=o||{}).strict,a=!1!==o.end,s=u(o.delimiter||e),l=o.delimiters||r,f=[].concat(o.endsWith||[]).map(u).concat("$").join("|"),d="",p=!1,b=0;b<t.length;b++){var h=t[b];if("string"==typeof h)d+=u(h),p=b===t.length-1&&l.indexOf(h[h.length-1])>-1;else{var v=u(h.prefix),g=h.repeat?"(?:"+h.pattern+")(?:"+v+"(?:"+h.pattern+"))*":h.pattern;n&&n.push(h),h.optional?h.partial?d+=v+"("+g+")?":d+="(?:"+v+"("+g+"))?":d+=v+"("+g+")"}}return a?(i||(d+="(?:"+s+")?"),d+="$"===f?"$":"(?="+f+")"):(i||(d+="(?:"+s+"(?="+f+"))?"),p||(d+="(?="+s+"|"+f+")")),new RegExp("^"+d,c(o))}function l(t,n,e){return t instanceof RegExp?function(t,n){if(!n)return t;var e=t.source.match(/\((?!\?)/g);if(e)for(var r=0;r<e.length;r++)n.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return t}(t,n):Array.isArray(t)?function(t,n,e){for(var r=[],o=0;o<t.length;o++)r.push(l(t[o],n,e).source);return new RegExp("(?:"+r.join("|")+")",c(e))}(t,n,e):(r=n,s(i(t,o=e),r,o));var r,o}},function(t,n,e){"use strict";t.exports=function(t){(0,t.send)("blob.fetch",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=!1;return t.find(function(t){var o=t.pattern.exec(n);if(null!==o)return r=!0,o.shift(),t.keys.forEach(function(t,n){e[t.name]=o[n]}),t.handler(e),r}),r})}},function(t,n,e){"use strict";var r=e(0).isFunction;t.exports=function(t){t.on;var n=t.send;n("blob.primary",function(t,e){r(t)?n("blob.builder",t()):n("blob.route",{path:t,handler:function(t){n("blob.builder",e(t))}})})}}]);